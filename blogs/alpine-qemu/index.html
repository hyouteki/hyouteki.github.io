<!doctype html><html lang=en><head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1" name=viewport><meta content=#5100ff name=theme-color><link href=https://hyouteki.github.io/blogs/alpine-qemu/ rel=canonical><title>
     Alpine Linux on QEMU with Persistent Storage - Ninthcircle
    
  </title><link href=https://hyouteki.github.io/style.css rel=stylesheet><link href=/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link href=/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/site.webmanifest rel=manifest><link href=https://vmst.io/@hyouteki rel=me><meta content=Ninthcircle property=og:site_name><meta content="
     Alpine Linux on QEMU with Persistent Storage - Ninthcircle
    " property=og:title><meta content=https://hyouteki.github.io/blogs/alpine-qemu/ property=og:url><meta content="A comprehensive guide to setting up Alpine Linux on QEMU with persistent storage and SSH access." property=og:description><meta content=https://hyouteki.github.io/card.png property=og:image><meta content=summary_large_image property=twitter:card><body><header><nav><a href=https://hyouteki.github.io> <i class="bi bi-house"></i> Ninthcircle </a><ul><li><a href=https://hyouteki.github.io/blogs target=_blank> <i class="bi bi-journal-bookmark"></i> Blogs </a><li><a href=https://hyouteki.github.io/toys target=_blank> <i class="bi bi-joystick"></i> Toys </a><li><a href=https://hyouteki.github.io/projects target=_blank> <i class="bi bi-pc-display"></i> Projects </a><li><a href=https://hyouteki.github.io/writings target=_blank> <i class="bi bi-vector-pen"></i> Writings </a><li><a href=https://github.com/hyouteki target=_blank> <i class="bi bi-github"></i> </a><li><a href=https://www.linkedin.com/in/hyouteki/ target=_blank> <i class="bi bi-linkedin"></i> </a><li><a href=https://twitter.com/mainlakshayhoon target=_blank> <i class="bi bi-twitter-x"></i> </a></ul></nav></header><div class=container><h1>Alpine Linux on QEMU with Persistent Storage</h1><small> <time datetime=2025-01-29T00:00:00+00:00 pubdate>29 January 2025</time> <span>•</span> <ul class=tags><li><a class=tag href=https://hyouteki.github.io/tags/alpine/>alpine</a><li><a class=tag href=https://hyouteki.github.io/tags/qemu/>qemu</a><li><a class=tag href=https://hyouteki.github.io/tags/virtualization/>virtualization</a><li><a class=tag href=https://hyouteki.github.io/tags/linux/>linux</a><li><a class=tag href=https://hyouteki.github.io/tags/ssh/>ssh</a><li><a class=tag href=https://hyouteki.github.io/tags/blog/>blog</a></ul> </small><p>This blog provides a comprehensive guide to setting up Alpine Linux on QEMU with persistent storage and SSH access.<h2 id=dependencies>Dependencies</h2><ol><li><a href=https://alpinelinux.org/downloads/>Alpine Linux ISO</a><li><a href=https://www.qemu.org/download/>QEMU</a></ol><h2 id=getting-started>Getting Started</h2><h3 id=1-create-a-virtual-disk>1. Create a Virtual Disk</h3><p>To enable persistent storage, create a virtual hard disk:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">qemu-img</span></span><span class="z-meta z-function-call z-arguments z-shell"> create<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>f</span> qcow2 alpine-persistent.qcow2 10G</span>
</span></code></pre><h3 id=2-run-qemu-with-iso-and-virtual-disk>2. Run QEMU with ISO and Virtual Disk</h3><p>Boot Alpine Linux with the installation ISO and attach the virtual disk:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">qemu-system-x86_64</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>m</span> 1024 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>smp</span> 2 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>boot</span> d <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>cdrom</span> alpine-standard-3.21.2-x86_64.iso <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>drive</span> file=alpine-persistent.qcow2,format=qcow2 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>net</span> nic<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>net</span> user,hostfwd=tcp::2222-:22 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>display</span> gtk</span>
</span></code></pre><h3 id=3-install-alpine-linux>3. Install Alpine Linux</h3><ol><li>Login with the default credentials i.e. (root,&LTno_passwd>).<li>Start the setup script via <code>setup-alpine</code>.<li>When prompted to select a disk, choose sda (the attached virtual disk).<li>Follow the setup instructions and confirm writing changes to disk.<li>Once installation is complete, reboot the system.</ol><h3 id=4-enable-ssh-optional>4. Enable SSH (Optional)</h3><p>SSH allows remote access to your VM from the host machine. Start the ssh service and enable for future connections.<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rc-service</span></span><span class="z-meta z-function-call z-arguments z-shell"> sshd start</span>
<span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">rc-update</span></span><span class="z-meta z-function-call z-arguments z-shell"> add sshd</span>
</span></code></pre><p>You can now connect via SSH using:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ssh</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>p</span> 2222 root@localhost</span>
</span></code></pre><h3 id=5-boot-installed-alpine-linux>5. Boot Installed Alpine Linux</h3><p>After installation, run QEMU without the ISO:<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">qemu-system-x86_64</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>m</span> 1024 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>smp</span> 2 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>drive</span> file=alpine-persistent.qcow2,format=qcow2 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>net</span> nic<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>net</span> user,hostfwd=tcp::2222-:22 <span class="z-punctuation z-separator z-continuation z-line z-shell">\
</span><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell">  -</span>display</span> gtk</span>
</span></code></pre><p>Now, your Alpine Linux VM is fully set up with persistent storage and SSH access.<hr><nav class=post-nav><a class="post-nav-item post-nav-prev" href=https://hyouteki.github.io/blogs/nginx-with-http3/> <div class=nav-arrow>← Previous</div> <span class=post-title>Compiling nginx with http3</span> </a></nav><p class=dialog-buttons><a class=inline-button href=#top>Go to top</a> <a class="inline-button colored" href=https://github.com/hyouteki/hyouteki.github.io/issues>File an issue</a></div><footer class=footer><p title="Last built at 2025-02-10 16:16 +00:00"><small>© Ninthcircle, 2025</small><p><small>Powered by <a href=https://www.getzola.org>Zola</a> and <a href=https://daudix.codeberg.page/duckquill>Duckquill</a></small></footer>